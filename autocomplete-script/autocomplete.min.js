var autoComplete=function(){function e(e){function t(e,t){return e.classList.contains(t)}function s(e,t,s){e.addEventListener(t,s)}function i(e,i,o,n){s(n,i,function(s){for(var i,n=s.target;n&&!(i=t(n,e));)n=n.parrentElement;return i?void o(n):void 0})}var o={inputSelector:"",data:"",maxItemsBox:5,findSuggestions:function(e,t){var s=[];e=e.toLowerCase();for(var i=0;i<t.length;i++)t[i].toLowerCase().indexOf(e)>-1&&s.push(t[i]);return s},itemRender:function(e,t){var s="",i=new RegExp("("+t+")","gi");return s+='<div class="suggestions-box-item" data-item="',s+=e,s+='">',s+=e.replace(i,"<b>$1</b>"),s+="</div>"}};for(var n in e)o.hasOwnProperty(n)&&(o[n]=e[n]);var g=document.querySelector(o.inputSelector);g.suggestionsBox=document.createElement("DIV"),g.suggestionsBox.className="suggestions-box",g.lastValue="",g.suggestionsBox.refreshInnerContent=function(e,t){for(var s="",i=0;i<e.length;i++)s+=o.itemRender(e[i],t);this.innerHTML=s},g.suggestionsBox.refresh=function(e,t){var s=g.getBoundingClientRect();this.style.width=s.width+"px",this.style.top=s.bottom+window.pageYOffset+"px",this.style.left=s.left+"px",this.scrollTop=0,this.refreshInnerContent(e,t),document.body.appendChild(this),this.firstElementChild&&!this.itemHeight&&(this.itemHeight=this.firstElementChild.getBoundingClientRect().bottom-s.bottom),this.itemHeight&&(this.maxHeight=this.itemHeight*o.maxItemsBox,this.style.maxHeight=this.maxHeight+"px"),this.style.display="block"},g.keyDownHandler=function(e){var t=e.which||e.keyCode,s=g.suggestionsBox.querySelector(".selected");return s&&13===t?(e.preventDefault(),this.value=s.getAttribute("data-item"),void(this.suggestionsBox.style.display="none")):void 0},g.keyUpHandler=function(e){var t=e.which||e.keyCode,s=this.value,i=g.suggestionsBox.querySelector(".selected");if(13!==t){if(""===s)return this.suggestionsBox.style.display="none",void(this.lastValue="");if(38!==t&&40!==t)this.lastValue!==s&&(this.suggestionsBox.refresh(o.findSuggestions(s,o.data),s),this.lastValue=s);else if(i)if(i.classList.remove("selected"),38===t){(i=i.previousElementSibling)||(i=this.suggestionsBox.lastElementChild),i.className+=" selected";var n=i.getBoundingClientRect().top-this.suggestionsBox.getBoundingClientRect().top;n>=this.suggestionsBox.maxHeight&&(this.suggestionsBox.scrollTop=i.getBoundingClientRect().top-this.suggestionsBox.getBoundingClientRect().top-this.suggestionsBox.maxHeight+this.suggestionsBox.itemHeight),0>n&&(this.suggestionsBox.scrollTop-=this.suggestionsBox.itemHeight)}else{(i=i.nextElementSibling)||(i=this.suggestionsBox.firstElementChild,this.suggestionsBox.scrollTop=0),i.className+=" selected";var n=i.getBoundingClientRect().top-this.suggestionsBox.getBoundingClientRect().top;n>=this.suggestionsBox.maxHeight&&(this.suggestionsBox.scrollTop+=this.suggestionsBox.itemHeight)}else this.suggestionsBox.firstElementChild.className+=" selected"}},g.blurHandler=function(){this.suggestionsBox.style.display="none"},s(g,"blur",g.blurHandler),s(g,"keyup",g.keyUpHandler),s(g,"keydown",g.keyDownHandler),i("suggestions-box-item","mouseover",function(e){var t=document.querySelector(".suggestions-box-item.selected");t&&t.classList.remove("selected"),e.className+=" selected"},g.suggestionsBox),i("suggestions-box-item","mousedown",function(e){g.value=e.getAttribute("data-item"),g.suggestionsBox.style.display="none"},g.suggestionsBox)}return e}();